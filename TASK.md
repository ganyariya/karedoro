# karedoro 開発タスク一覧

## イテレーション1: プロジェクト基盤とドメイン層

### 1.1 プロジェクトセットアップ
- [ ] go.mod ファイルの作成
- [ ] 必要な依存関係の追加
  - [ ] github.com/hajimehoshi/ebiten/v2
  - [ ] github.com/hajimehoshi/oto
  - [ ] github.com/gen2brain/beeep
- [ ] プロジェクト構造の作成（DDD アーキテクチャ）
  - [ ] domain/ ディレクトリ
  - [ ] application/ ディレクトリ
  - [ ] presentation/ ディレクトリ
  - [ ] assets/ ディレクトリ（音声ファイル用）

### 1.2 定数とタイプ定義
- [ ] セッション時間の定数定義
  - [ ] WORK_SESSION_DURATION (25分)
  - [ ] BREAK_SESSION_DURATION (5分)
  - [ ] WARNING_INTERVAL (5分)
- [ ] セッション状態の型定義
  - [ ] SessionState enum (WorkSession, BreakSession, Idle)
  - [ ] SessionType enum (Work, Break)
- [ ] その他の定数定義
  - [ ] UI関連の定数（色、サイズなど）

### 1.3 ドメイン層の実装
- [ ] セッション管理のドメインロジック
  - [ ] Session struct の定義
  - [ ] Timer struct の実装
  - [ ] 状態遷移ロジックの実装
- [ ] セッション状態マネージャーの実装
  - [ ] 状態変更の処理
  - [ ] タイマーの開始・停止・一時停止
  - [ ] 警告システムのロジック

## イテレーション2: アプリケーション層とコア機能

### 2.1 アプリケーション層の実装
- [ ] セッションサービスの実装
  - [ ] セッション開始・終了の処理
  - [ ] 状態変更の通知機能
  - [ ] バックグラウンド処理の管理
- [ ] 設定管理サービスの実装
  - [ ] 設定ファイルの読み書き
  - [ ] デフォルト設定の適用

### 2.2 音声システムの実装
- [ ] 音声ファイルの準備
  - [ ] セッション開始音
  - [ ] セッション終了音
  - [ ] 警告音
- [ ] 音声再生システムの実装
  - [ ] ebiten/oto を使った音声再生
  - [ ] 音声ファイルの埋め込み
  - [ ] 音量制御機能

### 2.3 通知システムの実装
- [ ] システム通知の実装
  - [ ] beeep を使った通知機能
  - [ ] クロスプラットフォーム対応
  - [ ] 通知メッセージの定数化

## イテレーション3: UI層とユーザーインタラクション

### 3.1 基本UI の実装
- [ ] ebitengine ベースのゲームループ
- [ ] 基本的なウィンドウ設定
- [ ] フォントの読み込みと文字描画
- [ ] 基本的なレイアウトシステム

### 3.2 セッション画面の実装
- [ ] 作業セッション画面
  - [ ] カウントダウンタイマーの表示
  - [ ] 一時停止・再開ボタン
  - [ ] 進捗表示
- [ ] 休憩セッション画面
  - [ ] カウントダウンタイマーの表示
  - [ ] 一時停止・再開ボタン
  - [ ] 進捗表示

### 3.3 全画面オーバーレイの実装
- [ ] セッション終了時の全画面表示
- [ ] ボタンの配置とスタイリング
  - [ ] 「休憩セッションを開始」ボタン
  - [ ] 「休憩をスキップして作業セッションへ」ボタン
  - [ ] 「作業セッションを開始」ボタン
- [ ] メッセージの表示
- [ ] キーボード・マウス入力の処理

## イテレーション4: 高度な機能と制約

### 4.1 ウィンドウ制御の実装
- [ ] 全画面モードの制御
  - [ ] ebiten.SetFullscreen() の実装
- [ ] ウィンドウクローズイベントの処理
  - [ ] ebiten.SetWindowClosingHandled() の実装
  - [ ] バックグラウンド動作の継続

### 4.2 警告システムの実装
- [ ] 待機状態での定期警告
- [ ] 警告タイマーの管理
- [ ] 音声付き通知の実装

### 4.3 一時停止機能の実装
- [ ] セッション中の一時停止
- [ ] 一時停止状態のUI表示
- [ ] 再開機能の実装

## イテレーション5: テストと品質保証

### 5.1 単体テストの実装
- [ ] ドメイン層のテスト
  - [ ] セッション管理ロジックのテスト
  - [ ] 状態遷移のテスト
  - [ ] タイマー機能のテスト
- [ ] アプリケーション層のテスト
  - [ ] セッションサービスのテスト
  - [ ] 設定管理のテスト

### 5.2 統合テストの実装
- [ ] 音声システムのテスト
- [ ] 通知システムのテスト
- [ ] UI インタラクションのテスト

### 5.3 品質保証
- [ ] コードレビュー
- [ ] リファクタリング
- [ ] パフォーマンステスト

## イテレーション6: パッケージングと配布

### 6.1 ビルドシステムの構築
- [ ] クロスプラットフォームビルドの設定
- [ ] アセットの埋め込み
- [ ] 実行ファイルの最適化

### 6.2 配布準備
- [ ] インストーラーの作成（必要に応じて）
- [ ] ドキュメントの整備
- [ ] リリースノートの作成

## 開発ガイドライン

### 各イテレーション後に実行すること
1. `go build` でビルドエラーがないことを確認
2. `go test ./...` でテストが通ることを確認
3. 動作確認（手動テスト）
4. コードリファクタリング
5. 必要に応じてコミット

### 品質チェックリスト
- [ ] マジックナンバーを使用していない
- [ ] 適切な型定義を使用している
- [ ] エラーハンドリングが適切に実装されている
- [ ] コードが読みやすく整理されている
- [ ] テストが意味のある範囲をカバーしている

## 優先度
- **高**: イテレーション1-3（基本機能の実装）
- **中**: イテレーション4-5（高度な機能とテスト）
- **低**: イテレーション6（パッケージングと配布）

## 備考
- 各イテレーションは独立して動作する機能を含むように設計
- 早期に動作するプロトタイプを作成し、段階的に機能を追加
- テストファーストではなく、機能実装後にテストを追加する方針